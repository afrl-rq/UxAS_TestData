## Message Test Application

This application was developed to execute UxAS scenarios and quickly compare the generated messages to a set of messages that are understood to be the acceptable output. At this stage in development, this application compares the types of messages that are output, and the amount of times those messages are logged with the message logger data service to the UxAS message database. This application runs the scenarios in the Impact folder.

The following must be downloaded in order to run the message comparison application:

* [Python & pip](https://www.python.org/ftp/python/3.6.1/python-3.6.1.exe)
* PyQt5
  * On a Windows machine: this can be installed with the command prompt using the 'pip install PyQt5' command.
  * On a Linux machine: this can be installed through the terminal with the 'pip3 install PyQt5' command.
  * Note: PyQt5 is not compatible with python versions preceding Python 3.5
* A working version of [OpenUxAS](https://github.com/afrl-rq/OpenUxAS)
* [Git Bash](https://git-scm.com/download/win) (for Windows users)

To start the application, execute the main.py script. Since we are working with PyQt5, this is must be executed with the 32-bit version of Python 3.

If there are issues with the execution privileges or finding the UxAS test scripts, run the cleanScripts.sh script. This can be run by entering the Test directory and entering the following command in the terminal: 'bash cleanScripts.sh'

#### Adding Tests ####

Tests are located in the Impact folder of this repository. These tests are similar to UxAS scenarios, but have a few additional requirements: the accepted database, and a script that can execute a UxAS scenario. This script must use UxAS's run limit command line argument.

##### Configuring a Run Limit #####

UxAS accepts command line arguments. This should be configured in the .sh file that executes the UxAS scenario. To configure the run limit, on the line the UxAS configuration file's path is assigned add the argument '-runUntil X' where X is the amount of time you would like to run your scenario in seconds. In the scenarios tested thus far, X is replaced with 5.

##### Configuring an Accepted Database #####

To configure an accepted database:

1. Add a folder called AcceptedDb in the scenarios base folder.

2. In the AcceptedDb folder, add a db3 file that holds the accepted messages that were logged from the message logger data service. This database can be generated by executing the UxAS scenario but the message output should be verified before being leveraged as the accepted database.

#### Skipping Messages ####

This application allows the user to skip message comparisons between the message databases. In order to skip a message, add the message name to the MessageBlacklist.txt file. This file contains comma delimited values that represent message name hints. The blacklist file uses hints in order to skip specified message comparisons between the database produced through a test, and the accepted database. In order to skip all messages in the afrl messaging set, it is not necessary to include all afrl message names, instead, add afrl to the message blacklist file. The search is done by finding message keys that contain the blacklist hints.
